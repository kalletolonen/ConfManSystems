# **h3 Versionhallinta / Managing versions**

I started @ 12.02.
  
The source for the exercise [h3](https://terokarvinen.com/2021/configuration-management-systems-2022-spring/#h3-versionhallinta)
  
**Hardware & Software**  
*Win 11 + VirtualBox 6.0 + Debian 11 Bullseye*  
  
*Hardware:*  
*CPU: AMD Ryzen 9 5900HS*  
*Mem: 16 Gt LPDDR4X*  
*Storage: 512 Gt M.2 2230 NVMe PCIe 3.0 SSD*  
  
##  z) Lue ja tiivistä / Reading exercise  
  
** https://commonmark.org/help/ **  
  
The article tell the gospel of .md. It's a really simple way of doing word processing. It does only some basic stuff, but the key function of text isn't to look extra fance - it's to convey information. In that regard, MarkDown is the alpha of alpha's on the field. You can create links, headings, show images, quote code **with intendations intact** and get stuff done extremely quickly.  
  
Key takeaway for me:  
-You can highlight code by putting it between backticks: \```  code goes here \```  
  
**Example**  
  
```
import random
print(random.randint(1,10))
```
  

## a) MarkDown. Tee tämän tehtävän raportti MarkDownina. Helpointa on tehdä raportti GitHub-varastoon, jolloin md-päätteiset tiedostot muotoillaan automaattisesti. Tyhjä rivi tekee kappalejaon, risuaita ‘#’ tekee otsikon, sisennys merkitsee koodinpätkän. / Do the report in MarkDown.

This report was written in MarkDown, with notepad++, that has natice support for the format. Notepad++ makes the formatting obvious even when you're writing your text - you can easily notice when you do a typo from the UI.  
  
![Pic 1. Notepad++](pics/h3/1.png)  
*Native support for the md-syntax*  
  
## b) Pull first. Tee useita muutoksia git-varastoosi. Tee muutama muutos, jossa yksi commit koskee useampaa tiedostoa. Anna hyvä kuvaukset (commit message), yksi englanninkielinen lause imperatiivissa (määräysmuodossa) "Add top level menu to Foobar synchronizer" / Use Git properly
  
First I added this article to my course repository. My repository already existed, so I didn't have to initiate it. These commands were given in the directory that this article was in.   
	
	git pull
	git push
	git add .
	git commit -m "Made initial commit for article"
	git pull
	git push
	
````  
C:\Confmansys>git commit -m "Made initial commit for article"
[main 663f965] Made initial commit for article
 4 files changed, 121 insertions(+), 1 deletion(-)
 create mode 100644 h3.md
 create mode 100644 h3.md.bak
 create mode 100644 pics/h3/1.png
````
  
As it is obvious from the CLI, Git works with Windows too.  
  
![Pic 2. Rendered md-output](pics/h3/2.png)  
*Going meta - rendered MarkDown in Github*  

## c) Kaikki kirjataan. Näytä omalla git-varastollasi esimerkit komennoista ‘git log’, ‘git diff’ ja ‘git blame’. Selitä tulokset. / Explain the output from Git-commands

I continued this article in my Virtualbox-Linux and Micro. Here's a tip to make MarkDown readable in Micro:  

	Push ctrl + e #for Micro settings
	set softwrap true

This is a handy way to make text wrap so that it fits smaller screen sizes.  

Source: https://terokarvinen.com/2022/micro-editor-lsp-support-python-and-go-jump-to-definition-show-function-signature/  

Next, I made a pull and a push.

	git pull
	git push

Then I executed the log-command.

	git log

````
commit 71a6d27a0076c7124b55525c89cbf13b34e3d0ee (HEAD -> main, origin/main, origin/HEAD)
Author: Kalle Tolonen <kalle.tolonen@gmail.com>
Date:   Sat Apr 16 12:50:40 2022 +0300

    Added a picture

commit 663f965efa48445061f4b7c324834ea2fee14b9c #The commit hash, it's unique
Author: Kalle Tolonen <kalle.tolonen@gmail.com> #commit author
Date:   Sat Apr 16 12:46:50 2022 +0300			#commit time and date

    Made initial commit for article				#commit message

commit f91d7a9c7e949d057f3a2c328cc914edc4a2bf52
Author: Kalle Tolonen <kalle.tolonen@gmail.com>
Date:   Thu Apr 14 13:28:29 2022 +0300

    Add notes

commit 301f721e52c2941cbadf5a9fcf8c1e3880695903	#Earlier commit to the same repository
Author: Kalle Tolonen <kalle.tolonen@gmail.com>
Date:   Mon Apr 11 15:48:38 2022 +0300

    h2, before finishing touches

commit 42c3bcaf6d10d90ea25f5c0ed3a88a43a9bf6e04
Author: Kalle Tolonen <kalle.tolonen@gmail.com>
Date:   Mon Apr 11 15:47:51 2022 +0300

    h2, corrections

````
  
After that I studied the differences:  

	git diff


````
diff --git a/h3.md b/h3.md #File in question
index 7c48f31..346ea3d 100644 #hash (commit) in question
--- a/h3.md
+++ b/h3.md
@@ -47,7 +47,7 @@ First I added this article to my course repository. My repository already existe
        git pull
        git push
        
-```` #Stuff that was removed
+```` #Stuff that was added (compered to the previous version)

 C:\Confmansys>git commit -m "Made initial commit for article"
 [main 663f965] Made initial commit for article
  4 files changed, 121 insertions(+), 1 deletion(-)
@@ -55,19 +55,71 @@ C:\Confmansys>git commit -m "Made initial commit for article"
  create mode 100644 h3.md.bak
  create mode 100644 pics/h3/1.png
 
-
+  
```` 

Finally, it was time to find the blame.  

	git blame

Git blame will show you who did what:  
````
kallet@confmansys:~/ConfManSystems$ git blame h1.md
af3c3e48 (Kalle Tolonen 2022-04-02 09:27:42 +0300   1) # **h1 Hei maailma & monet tilat  / Hello World and states**
e66fc9b2 (Kalle Tolonen 2022-04-01 15:49:24 +0300   2) 
e66fc9b2 (Kalle Tolonen 2022-04-01 15:49:24 +0300   3) I started @ 13.40.
e66fc9b2 (Kalle Tolonen 2022-04-01 15:49:24 +0300   4)   
af3c3e48 (Kalle Tolonen 2022-04-02 09:27:42 +0300   5) The source for the exercise  [Tero Karvinen](https://terokarvinen.com/2021/configuration-management-systems-2022-spring/#h1-hei-maailma--monet-tilat)
````
The first element is the commit hash, the it's who did it and when. After that there's a line number and the content.  


## c) Huppis! Tee tyhmä muutos gittiin, älä tee commit:tia. Tuhoa huonot muutokset ‘git reset --hard’. Huomaa, että tässä toiminnossa ei ole peruutusnappia.

## d) Formula. Tee uusi salt-tila (formula, moduli, infraa koodina). (Eli uusi tiedosto esim. /srv/salt/terontila/init.sls). Voit tehdä ihan yksinkertaisen parin funktion (pkg, file...) tilan, tai edistyneemmin asentaa ja konfiguroida minkä vain uuden ohjelman: demonin, työpöytäohjelman tai komentokehotteesta toimivan ohjelman. Käytä tarvittaessa ‘find -printf “%T+ %p\n”|sort’ löytääksesi uudet asetustiedostot. / Make a new state with Salt

## f) Vapaaehtoinen: Laita srv/salt/ gittiin. Tee uusi moduli. Kloonaa varastosi toiselle koneelle (tai poista srv/salt ja palauta se kloonaamalla) ja jatka sillä. / add a Salt state to Git

  
